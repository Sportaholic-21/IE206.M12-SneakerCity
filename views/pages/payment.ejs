<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head'); -%>
    <!--stripe-->
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <script>
        var stripePublicKey = '<%= stripePublicKey %>'
    </script>
</head>
<body>
    <%- include('../partials/nav'); -%>
    <!--<form class="payment" id="payment_form" action="/payment/checkout" method="POST">-->
    <div class="container">
    <div class="payment">
        <div class="payment__main">
            <section class="payment__main-row">
                <form class="payment__form">
                    <div class="payment__form-title">Shipment Details</div>
                   
                    <div class="payment__form-fomat  ">
                        <input class="payment__form-control" id="name" placeholder="FULL NAME" type="text" size="30" autocapitalize="off" spellcheck="false">
                    </div>
                    <div class="payment__form-fomat">
                        <input class="payment__form-control" id="email" placeholder="EMAIL" type="email" size="30" autocapitalize="off" spellcheck="false">
                    </div>
                    <div class="payment__form-fomat">
                        <input class="payment__form-control" id="phone" placeholder="PHONE NUMBER " type="tel" size="30" autocapitalize="off" spellcheck="false" maxlength="15">
                    </div>
                    <div class="payment__form-fomat"> 
                        <input class="payment__form-control" id="add-num" placeholder="ADDRESS" type="text" size="30" autocapitalize="off" spellcheck="false">
                    </div>
                    <div class="payment__form-fomat">
                        <select class="payment__form-control" id="add-city">	
                            <option value="0"> City</option>											
                            <option data-code="HC" value="50">Hồ Chí Minh</option>
                            <option data-code="HI" value="1">Hà Nội</option>
                            <option data-code="DA" value="32">Đà Nẵng</option>
                            <option data-code="AG" value="57">An Giang</option>                       
                            <option data-code="BV" value="49">Bà Rịa - Vũng Tàu</option>                       
                            <option data-code="BG" value="15">Bắc Giang</option>                        
                            <option data-code="BK" value="4">Bắc Kạn</option>                      
                            <option data-code="BL" value="62">Bạc Liêu</option>                        
                            <option data-code="BN" value="18">Bắc Ninh</option>                        
                            <option data-code="BT" value="53">Bến Tre</option>                        
                            <option data-code="BD" value="35">Bình Định</option>                        
                            <option data-code="BI" value="47">Bình Dương</option>
                            <option data-code="BP" value="45">Bình Phước</option>
                            <option data-code="BU" value="39">Bình Thuận</option>
                            <option data-code="CM" value="63">Cà Mau</option>
                            <option data-code="CN" value="59">Cần Thơ</option>
                            <option data-code="CB" value="3">Cao Bằng</option>
                            <option data-code="DC" value="42">Đắk Lắk</option>
                            <option data-code="DB" value="7">Điện Biên</option>
                            <option data-code="DN" value="48">Đồng Nai</option>
                            <option data-code="DT" value="56">Đồng Tháp</option>
                            <option data-code="GL" value="41">Gia Lai</option>
                            <option data-code="HG" value="2">Hà Giang</option>
                            <option data-code="HM" value="23">Hà Nam</option>
                            <option data-code="HT" value="28">Hà Tĩnh</option>
                            <option data-code="HD" value="19">Hải Dương</option>
                            <option data-code="HP" value="20">Hải Phòng</option>
                            <option data-code="HU" value="60">Hậu Giang</option>
                            <option data-code="HO" value="11">Hòa Bình</option>
                            <option data-code="HY" value="21">Hưng Yên</option>
                            <option data-code="KH" value="37">Khánh Hòa</option>
                            <option data-code="KG" value="58">Kiên Giang</option>
                            <option data-code="KT" value="40">Kon Tum</option>
                            <option data-code="LI" value="8">Lai Châu</option>
                            <option data-code="LD" value="44">Lâm Đồng</option>
                            <option data-code="LS" value="13">Lạng Sơn</option>
                            <option data-code="LO" value="6">Lào Cai</option>
                            <option data-code="LA" value="51">Long An</option>
                            <option data-code="ND" value="24">Nam Định</option>
                            <option data-code="NA" value="27">Nghệ An</option>
                            <option data-code="NB" value="25">Ninh Bình</option>
                            <option data-code="NT" value="38">Ninh Thuận</option>
                            <option data-code="PT" value="16">Phú Thọ</option>
                            <option data-code="PY" value="36">Phú Yên</option>
                            <option data-code="QB" value="29">Quảng Bình</option>
                            <option data-code="QM" value="33">Quảng Nam</option>
                            <option data-code="QG" value="34">Quảng Ngãi</option>
                            <option data-code="QN" value="14">Quảng Ninh</option>                        
                            <option data-code="QT" value="30">Quảng Trị</option>                     
                            <option data-code="ST" value="61">Sóc Trăng</option>                       
                            <option data-code="SL" value="9">Sơn La</option>                        
                            <option data-code="TN" value="46">Tây Ninh</option>
                            <option data-code="TB" value="22">Thái Bình</option>
                            <option data-code="TY" value="12">Thái Nguyên</option>
                            <option data-code="TH" value="26">Thanh Hóa</option>
                            <option data-code="TT" value="31">Thừa Thiên Huế</option>
                            <option data-code="TG" value="52">Tiền Giang</option>
                            <option data-code="TV" value="54">Trà Vinh</option>
                            <option data-code="TQ" value="5">Tuyên Quang</option>
                            <option data-code="VL" value="55">Vĩnh Long</option>
                            <option data-code="VT" value="17">Vĩnh Phúc</option>
                            <option data-code="YB" value="10">Yên Bái</option>
                        </select>
                    </div>

                    <div class="payment__form-fomat col-1 ">
                        <select class="payment__form-control " >
                            <option data-code="null" value="null" selected="">State/Province</option>
                        </select>
                    </div>
                    <div class="payment__form-fomat col-1 ">
                        <select class="payment__form-control " >
                            <option data-code="null" value="null" selected="">Wards</option>         
                        </select>
                    </div>
                    <div class="payment__form-fomat">
                        <input class="payment__input" type="checkbox" name="update" >
                        Update the latest program information from Sneaker City
                    </div>

                    <div class=" payment__form-title">method of delivery</div>

                    <div class="payment__form-fomat col-2">
                        <input class="payment__input" type="radio" name="delivery" value="normal" checked >
                        Standard speed (2 - 5 working days)
                    </div>
                    <div class="payment__form-fomat col-3">$0</div>
                    <div class=" payment__form-title"> payment method </div>
                    <div class="payment__form-fomat">
                        <input class="payment__input" type="radio" name="type" value="direct" checked>
                        Payment on delivery 
                        <img class="payment__img" src="/images/ship-cod.jpg" alt="ship-cod">
                    </div>
                    <div class="payment__form-fomat">
                        <input class="payment__input" type="radio" name="type"  value="onepay">
                        Payment by international and domestic card (ATM)
                        <img class="payment__img"  src="/images/visa-logo.jpg" alt="visa">
                    </div>
                    <!--<div class="payment__form-fomat">
                        <input class="payment__input" type="radio" name="type" value="momo">
                        Payment by Momo wallet
                            <img class="payment__img" src="/images/MoMo_Logo.jpg" alt="momo">
                    </div>-->
                </form> 
            </section>
            <section class="payment__main-sidebar col-1"> 
                <ul class="listgroup">
                    <li class="listgroup__item title">ORDER SUMMARY</li>
                    <li class="divider"></li>
                    <% products.forEach(product => { %>
                        <div class="payment__product-list">
                            <div class="product_id" style="display: none;" data-product-id="<%= product.item._id %>"></div>
                            <li class="listgroup__item ">
                                <span class="text-left payment__product-name"><%= product.item.name %></span>
                                <span class="text-right payment__product-price">$<%= product.item.price %></span>
                            </li>
                            <li class="listgroup__item">
                                <span class="text-left">Size: 37</span>
                                <span class="qty">x <%= product.qty; %></span>
                            </li>
                        </div>
                    <% }); %>
                    <!-- <li class="divider"></li>                    
                    <li class="listgroup__item">
                        <input class="text-left payment__form-control" placeholder="Coupon Code"></input>
                        <button class="text-right button-right"> Use</button>
                    </li>
                    <li class="listgroup__item">
                        <span class="text-left">Subtotal</span>
                        <span class="text-right"> 
                            $<span><%#= total%></span>
                        </span>
                    </li>
                    
                    <li  class="listgroup__item">
                        <span class="text-left">Discount</span>
                        <span class="text-right">
                            - $ <span>0</span>
                        </span>
                    </li>
                    <li  class="listgroup__item">
                        <span class="text-left">Transport Fee</span>
                        <span class="text-right">
                            $ <span>0</span>
                        </span>
                    </li>
                    <li  class="listgroup__item">
                        <span class="text-left">Payment Fee</span>
                        <span class="text-right">
                            $ <span>0</span>
                        </span>
                    </li> -->
                    <li class="divider"></li>
                    <li  class="listgroup__item">
                        <span class="text-left title">Total</span>
                        <span class="text-right cost">
                            $ <%= total%>
                        </span>
                    </li>
                    <li class="listgroup__item">
                        <!--<input type="submit" class="button" id="orderBtn" value="Order Success">-->
                        <button class="button" id="orderBtn">Order</button>
                    </li>
                </ul>
            </section>
        </div>
    </div>
</div><!--</form>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script>
        $("#payment_form").submit(function(){
            var link = "/direct";
            if($("input[name='type'][value='momo']").prop("checked")) link = "/momo";
            if($("input[name='type'][value='onepay']").prop("checked")) link = "/card";
            $("#payment_form").attr("action",link)
        })
    </script>-->
    <%- include('../partials/footer'); -%> <%-
    include('../partials/script-line'); -%>  
</body>
<script> //script fill user 
    if (typeof '<%- session.user%>' != "undefined") {
        $("#name").val('<%- session.user.fullName%>');
        $("#email").val('<%- session.user.email%>')
        $("#phone").val('<%- session.user.phone%>')
        if (typeof '<%- session.user.address%>' != "undefined") {
            const cityValue = $('option:contains("<%- session.user.address.city %>")').val();
            $("#add-num").val('<%- session.user.address.number%>')
            $("#add-city").val(cityValue).change();
        }
    }
</script>
</html>