<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head'); -%>
  </head>
  <body>
    <%- include('../partials/nav'); -%>
    <div class="brandinfo">
      <div class="container">
        <div class="brandinfo__container">
          <nav>
            <ul class="breadcrumb">
              <li class="breadcrumb-items">
                <a href="home">Home</a>
              </li>
              <span>&ThickSpace;&#62;&ThickSpace;</span>
              <li class="breadcrumb-item active"><%= title %></li>
            </ul>
          </nav>
        </div>
        <div class="brandinfo_container">
          <% if(title == "vans" || title == "converse" || title == "palladium") {%>
            <div class='brandinfo__img-<%= title %>'>
              <img src='/images/<%= title %>-logo.png' />
            </div>
          <% }  %> 

            <div class="brandinfo__filter">
              <div class="brandinfo__filter-label">Sort by</div>
              <span id="popular" class="brandinfo__filter-btn sort">Popular</span>
              <span data-type="products" data-sort="-createdDate" class="brandinfo__filter-btn sort">Newest</span>
              <span id="favorite" class="brandinfo__filter-btn sort">Favorite</span>
              <div class="brandinfo__filter-selection-container">
                <div class="brandinfo__filter-selection">Price</div>
                <i
                  class="brandinfo__filter-selection__icon fas fa-angle-down"
                ></i>
                <ul class="brandinfo__filter-selection-container__option">
                  <li class="brandinfo__filter__option__item">
                    <span data-type="products" data-sort="price" class="brandinfo__select-input sort">Lowest</span>
                  </li>
                  <li class="brandinfo__filter__option__item">
                    <span data-type="products" data-sort="-price" class="brandinfo__select-input sort">Highest</span>
                  </li>
                </ul>
              </div>
            <div class="brandinfo__filter-searchcontainer">
             <form action="/products" method="GET">
               <input name="search" type="text" placeholder="Search">
               <div class="brandinfo__filter-searchcontainer-btn">
                 <button>Search</button>
          </div>
          </form>
        </div>
      </div>
          </div>
        </div>
        <div class="brandinfo__float">
          <div class="brandinfo__product">
            <div class="brandinfo__product-container">
              <%- include('../partials/card-product'); -%>
            </div>
            <div class="brandinfo__paginationcontainer">
              <div class="pagination">
                <% if (pages > 0) { %>
                  <ul class="pagination text-center">
                    <!-- disable First button when current is 1 -->
                      <% if (current == 1) { %>
                          <li class="disabled-link"><a>First</a></li>
                      <% } else { %>
                          <li><a href="/products?search=<%= searchQuery %>&sort=<%= sortQuery %>&page=1">First</a></li>
                      <% } %>

                      <!-- determine the start of pagination -->
                      <% if (Number(current) <= 2) {
                            i = 1;
                          } else if (Number(current) > pages - 2) {
                            i = pages - 4;
                          } else {
                            i = Number(current) - 2;
                          }
                          
                          start = i;
                      %>

                      <!-- loop through  -->
                      <% for (; i < start + 5 && i <= pages; i++) { %>
                          <!-- if i == current => active current link -->
                          <% if (i == current) { %>
                            <li class="active"><a><%= i %></a></li>
                          
                          <!-- otherwise display links -->
                          <% } else { %>
                              <li><a href="/products?search=<%= searchQuery %>&sort=<%= sortQuery %>&page=<%= i %>"><%= i %></a></li>
                          <% } %>
                      <% } %>
                    
                      <!-- disable Last button when current page is equal number of pages -->
                      <% if (current == pages) { %>
                          <li class="disabled-link"><a>Last</a></li>
                      <% } else { %>
                          <li><a href="/products?search=<%= searchQuery %>&sort=<%= sortQuery %>&page=<%= pages %>">Last</a></li>
                      <% } %>
                  </ul>
              <% } %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <%- include('../partials/footer'); -%> <%-
    include('../partials/script-line'); -%>
  </body>
</html>
